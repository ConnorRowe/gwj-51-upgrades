[gd_scene load_steps=11 format=2]

[ext_resource path="res://textures/metal_tile.png" type="Texture" id=1]
[ext_resource path="res://textures/transition.png" type="Texture" id=2]
[ext_resource path="res://scenes/TerrainPolygon2D.cs" type="Script" id=3]
[ext_resource path="res://scenes/TextBox.tscn" type="PackedScene" id=6]
[ext_resource path="res://textures/bg_1.png" type="Texture" id=7]
[ext_resource path="res://scenes/RoomArea.tscn" type="PackedScene" id=8]
[ext_resource path="res://scenes/World.cs" type="Script" id=9]
[ext_resource path="res://scenes/IntroRoom.tscn" type="PackedScene" id=11]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform sampler2D transition_mask_tex;
uniform sampler2D bg_2;
uniform float transition_amount:hint_range(0,1);

void fragment()
{
	if(transition_amount >= texture(transition_mask_tex, SCREEN_UV).r)
	{
		COLOR = texture(bg_2, UV);
	}
	else
	{
		COLOR = texture(TEXTURE, UV);
	}
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/transition_amount = 0.0
shader_param/transition_mask_tex = ExtResource( 2 )
shader_param/bg_2 = ExtResource( 1 )

[node name="World" type="Node2D"]
script = ExtResource( 9 )
__meta__ = {
"_edit_lock_": true
}

[node name="Background" type="CanvasLayer" parent="."]
layer = -128

[node name="BG" type="TextureRect" parent="Background"]
material = SubResource( 2 )
anchor_right = 1.0
anchor_bottom = 1.0
texture = ExtResource( 7 )
stretch_mode = 2

[node name="UI" type="CanvasLayer" parent="."]

[node name="TextBox" parent="UI" instance=ExtResource( 6 )]
visible = false
margin_left = 76.0
margin_top = 11.0
margin_right = -68.0
margin_bottom = -121.0

[node name="RoomAreas" type="Node2D" parent="."]
__meta__ = {
"_edit_lock_": true
}

[node name="IntroRoom" parent="RoomAreas" instance=ExtResource( 11 )]

[node name="Room2" parent="RoomAreas" instance=ExtResource( 8 )]
position = Vector2( 320, 0 )
input_pickable = false

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2( 0, 2 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( -21, -33, 358, -28, 337, 86, 318, 94, 317, 2, 18, 2, 18, -6, -8, -6, -8, 26, 0, 26, 0, 105, -4, 105, -4, 127, 0, 127, 0, 177, 260, 177, 316, 177, 316, 134, 334, 134, 333.657, 157.289, 629, 159, 631, 6, 354, -1, 360, -28, 635, -40, 664, -11, 650, 208, 333, 202, 221, 203, -44, 198 )

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D"]
color = Color( 0.278431, 0.490196, 0.521569, 1 )
polygon = PoolVector2Array( -21, -33, 358, -28, 337, 86, 318, 94, 317, 2, 18, 2, 18, -6, -8, -6, -8, 26, 0, 26, 0, 105, -4, 105, -4, 127, 0, 127, 0, 177, 260, 177, 316, 177, 316, 134, 334, 134, 333.657, 157.289, 629, 159, 631, 6, 354, -1, 360, -28, 635, -40, 664, -11, 650, 208, 333, 202, 221, 203, -44, 198 )
script = ExtResource( 3 )
OutlineColour = Color( 0.0705882, 0.12549, 0.12549, 1 )
TargetCollisionPoly = NodePath("../CollisionPolygon2D")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2( 160, 90 )
current = true
process_mode = 0
